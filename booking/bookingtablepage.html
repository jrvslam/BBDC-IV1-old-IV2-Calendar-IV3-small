<html>

<head>
    <title>BBDC: Booking For Basic Theory Lesson</title>
    <link rel="stylesheet" href="../style.css" />
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <script language="javascript" src="../admin/inc-script/common.js"></script>
    <script src="../logging.js"></script>
</head>

<body>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            changeLayout();
        });

        function changeOptions() {
            var currentLesson = localStorage.getItem('LessonNo') //unused
            document.getElementById('Lesson Display').innerHTML = ""; //initialise HTML
            document.getElementById('Lesson Display').innerHTML += currentLesson;
            var currentTitle = localStorage.getItem('TheorySelection'); //returns value of object for key requested
            if (currentTitle == 'BTP' || currentTitle == 'BTE' || currentTitle == 'FTP' || currentTitle == 'FTE') {
                document.getElementById("Lesson Row").style.display = "none"
            }

            var currentMonthsArray = []
            var currentMonthsArray = JSON.parse(localStorage.getItem('Month'));
            document.getElementById('Months Display').innerHTML = ""; //initialise HTML
            for (i = 0; i < currentMonthsArray.length; i++) {
                //add to HTML string
                document.getElementById('Months Display').innerHTML += currentMonthsArray[i]
                if (i != currentMonthsArray.length - 1) {
                    document.getElementById('Months Display').innerHTML += ", "
                }
            }

            var currentArray = []
            var currentArray = JSON.parse(localStorage.getItem('Session'));
            document.getElementById('Sessions Display').innerHTML = ""; //initialise HTML
            for (i = 0; i < currentArray.length; i++) {
                //add to HTML string
                document.getElementById('Sessions Display').innerHTML += currentArray[i]
                if (i != currentArray.length - 1) {
                    document.getElementById('Sessions Display').innerHTML += ", "
                }
            }

            var currentDaysArray = []
            var currentDaysArray = JSON.parse(localStorage.getItem('Day'));
            document.getElementById('Days Display').innerHTML = ""; //initialise HTML
            for (i = 0; i < currentDaysArray.length; i++) {
                //add to HTML string
                document.getElementById('Days Display').innerHTML += currentDaysArray[i]
                if (i != currentDaysArray.length - 1) {
                    document.getElementById('Days Display').innerHTML += ", "
                }
            }
        }

        function filterbyMonth() {
            //filter by rows: either 'month' or 'day'-first cell/col of each row

            //1. filter months:
            var bookingTable = document.getElementById('bookingTable')
            var rows = bookingTable.getElementsByTagName('tr');

            var keepMonthsArray = []
            var currentMonthsArray = []
            var currentMonthsArray = JSON.parse(localStorage.getItem('Month'));
            for (i = 0; i < currentMonthsArray.length; i++) {
                //extract row indexes for all rows containing selected months:
                if (currentMonthsArray[i] == 'Mar/2022') {
                    keepMonthsArray.push(3)
                }
                if (currentMonthsArray[i] == 'Apr/2022') {
                    keepMonthsArray.push(4)
                }
                if (currentMonthsArray[i] == 'May/2022') {
                    keepMonthsArray.push(5)
                }
                if (currentMonthsArray[i] == 'Jun/2022') {
                    keepMonthsArray.push(6)
                }
                if (currentMonthsArray[i] == 'Jul/2022') {
                    keepMonthsArray.push(7)
                }
                if (currentMonthsArray[i] == 'Aug/2022') {
                    keepMonthsArray.push(8)
                }
                if (currentMonthsArray[i] == 'Sep/2022') {
                    keepMonthsArray.push(9)
                }
                if (currentMonthsArray[i] == 'Oct/2022') {
                    keepMonthsArray.push(10)
                }
                if (currentMonthsArray[i] == 'Nov/2022') {
                    keepMonthsArray.push(11)
                }
                if (currentMonthsArray[i] == 'Dec/2022') {
                    keepMonthsArray.push(12)
                }
                if (currentMonthsArray[i] == 'Jan/2023') {
                    keepMonthsArray.push(1)
                }
                if (currentMonthsArray[i] == 'Feb/2023') {
                    keepMonthsArray.push(2)
                }
            }
            var removeMonthsArray = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
            //remove all months that user selected to filter out other months:
            for (var i = 0; i < keepMonthsArray.length; i++) {
                var k = removeMonthsArray.indexOf(keepMonthsArray[i]);
                removeMonthsArray.splice(k, 1);
            }

            //start removing rows from table:
            for (var row = 0; row < rows.length - 1; row++) {
                //first col:
                var cols = rows[row].children;
                var dateCell = cols[0];

                for (var i = 0; i < removeMonthsArray.length; i++) {

                    if (dateCell.textContent.includes('03/2022') && removeMonthsArray[i] == 3) {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('04/2022') && removeMonthsArray[i] == 4) {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('05/2022') && removeMonthsArray[i] == 5) {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('06/2022') && removeMonthsArray[i] == 6) {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('07/2022') && removeMonthsArray[i] == 7) {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('08/2022') && removeMonthsArray[i] == 8) {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('09/2022') && removeMonthsArray[i] == 9) {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('10/2022') && removeMonthsArray[i] == 10) {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('11/2022') && removeMonthsArray[i] == 11) {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('12/2022') && removeMonthsArray[i] == 12) {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('01/2023') && removeMonthsArray[i] == 1) {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('02/2023') && removeMonthsArray[i] == 2) {
                        rows[row].style.display = "none"
                    }

                }
            }
            //filter by cols: 'no.'

        }

        function filterbyDay() {
            var bookingTable = document.getElementById('bookingTable')
            var rows = bookingTable.getElementsByTagName('tr');

            //filter by days:
            var keepDaysArray = []
            var currentDaysArray = []
            var currentDaysArray = JSON.parse(localStorage.getItem('Day'));
            for (i = 0; i < currentDaysArray.length; i++) {
                //extract row indexes for all rows containing selected months:
                if (currentDaysArray[i] == 'Mon') {
                    keepDaysArray.push("Mon")
                }
                if (currentDaysArray[i] == 'Tue') {
                    keepDaysArray.push("Tue")
                }
                if (currentDaysArray[i] == 'Wed') {
                    keepDaysArray.push("Wed")
                }
                if (currentDaysArray[i] == 'Thur') {
                    keepDaysArray.push("Thur")
                }
                if (currentDaysArray[i] == 'Fri') {
                    keepDaysArray.push("Fri")
                }
                if (currentDaysArray[i] == 'Sat') {
                    keepDaysArray.push("Sat")
                }
                if (currentDaysArray[i] == 'Sun') {
                    keepDaysArray.push("Sun")
                }
            }
            var removeDaysArray = ["Mon", "Tue", "Wed", "Thur", "Fri", "Sat", "Sun"]

            //remove all days that user selected to filter out other months:
            for (i = 0; i < keepDaysArray.length; i++) {
                var k = removeDaysArray.indexOf(keepDaysArray[i]);
                removeDaysArray.splice(k, 1);
            }

            //start removing rows from table:
            for (var row = 0; row < rows.length - 1; row++) {
                //first col:
                var cols = rows[row].children;
                var dateCell = cols[0];
                for (i = 0; i < removeDaysArray.length; i++) {

                    if (dateCell.textContent.includes('Mon') && removeDaysArray[i] == 'Mon') {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('Tue') && removeDaysArray[i] == 'Tue') {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('Wed') && removeDaysArray[i] == 'Wed') {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('Thur') && removeDaysArray[i] == 'Thur') {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('Fri') && removeDaysArray[i] == 'Fri') {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('Sat') && removeDaysArray[i] == 'Sat') {
                        rows[row].style.display = "none"
                    }
                    if (dateCell.textContent.includes('Sun') && removeDaysArray[i] == 'Sun') {
                        rows[row].style.display = "none"
                    }
                }
            }
        }

        function filterbySessions() {
            var bookingTable = document.getElementById('bookingTable')
            var rows = bookingTable.getElementsByTagName('tr');
            //var rows = document.getElementById('bookingTable').rows

            //filter by Sessions:
            var keepArray = []
            var keepArray = JSON.parse(localStorage.getItem('Session'));

            var removeArray = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16']
            //remove all days that user selected to filter out other months:
            for (i = 0; i < keepArray.length; i++) {
                var k = removeArray.indexOf(keepArray[i]);
                removeArray.splice(k, 1);
            }
            var lessonType = localStorage.getItem('TheorySelection')
            //start removing rows from table:
            for (var row = 0; row < rows.length - 1; row++) {
                //first col:
                var cols = rows[row].getElementsByTagName('td');
                //remove cols[unselected no.]
                for (i = 0; i < removeArray.length; i++) {

                    if (removeArray[i] == '1' || (lessonType == 'BTL' || lessonType == 'FTL')) {
                        cols[1 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '2') {
                        cols[2 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '3') {
                        cols[3 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '4') {
                        cols[4 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '5') {
                        cols[5 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '6') {
                        cols[6 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '7') {
                        cols[7 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '8') {
                        cols[8 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '9') {
                        cols[9 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '10') {
                        cols[10 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '11') {
                        cols[11 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '12') {
                        cols[12 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '13') {
                        cols[13 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '14') {
                        cols[14 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '15') {
                        cols[15 + 1].style.display = "none"
                    }
                    if (removeArray[i] == '16') {
                        cols[16 + 1].style.display = "none"
                    }
                }
            }

        }
        //change input types/session time -for Praactice Page:
        function changeInputType() {
            var page = localStorage.getItem('TheorySelection')
            if (page == 'BTP' || page == 'FTP') {
                var bookingTable = document.getElementById('bookingTable')
                var inputs = bookingTable.getElementsByTagName('input');
                for (i = 0; i < inputs.length; i++) {
                    inputs[i].type = 'checkbox'
                }
            }
        }
        function changeVenues() {
            var venue = localStorage.getItem('Venue')
            var venues = document.getElementsByClassName('txtbold')
            for (i = 0; i < venues.length; i++) {
                if (venues[i].textContent.includes('BBDC')) {
                    //change innerHTML:
                    venues[i].innerHTML = venue

                }
            }
        }
        function changeTable() {
            changeInputType()
            changeVenues()
            filterbyMonth()
            filterbyDay()
            filterbySessions()
        }

        function checkSlots() {

            var availableSlots = document.getElementsByName('slot')
            //mths:
            var keepMonthsArray = []
            keepMonthsArray = JSON.parse(localStorage.getItem('Month')); //eg. Mar/2022
            //days:
            var keepDaysArray = []
            var keepDaysArray = JSON.parse(localStorage.getItem('Day')); //eg. "Mon"
            //session:
            var keepSessionsArray = []
            var keepSessionsArray = JSON.parse(localStorage.getItem('Session'));

            var matchedSlots = []
            var lessonType = localStorage.getItem('TheorySelection')

            for (i = 0; i < availableSlots.length; i++) {

                var currentMth = availableSlots[i].value.toString().split("-")[0]
                var currentDay = availableSlots[i].value.toString().split("-")[1]
                var currentSession = availableSlots[i].value.toString().split("-")[2]

                if (currentSession.toString() == '1' && (lessonType == 'BTL' || lessonType == 'FTL')) {
                    continue;
                }

                for (j = 0; j < keepMonthsArray.length; j++) {

                    var convertedDate;
                    if (keepMonthsArray[j] == 'Mar/2022') {
                        convertedDate = "03/2022"
                    }
                    if (keepMonthsArray[j] == 'Apr/2022') {
                        convertedDate = "04/2022"
                    }
                    if (keepMonthsArray[j] == 'May/2022') {
                        convertedDate = "05/2022"
                    }
                    if (keepMonthsArray[j] == 'Jun/2022') {
                        convertedDate = "06/2022"
                    }
                    if (keepMonthsArray[j] == 'Jul/2022') {
                        convertedDate = "07/2022"
                    }
                    if (keepMonthsArray[j] == 'Aug/2022') {
                        convertedDate = "08/2022"
                    }
                    if (keepMonthsArray[j] == 'Sep/2022') {
                        convertedDate = "09/2022"
                    }
                    if (keepMonthsArray[j] == 'Oct/2022') {
                        convertedDate = "10/2022"
                    }
                    if (keepMonthsArray[j] == 'Nov/2022') {
                        convertedDate = "11/2022"
                    }
                    if (keepMonthsArray[j] == 'Dec/2022') {
                        convertedDate = "12/2022"
                    }
                    if (keepMonthsArray[j] == 'Jan/2023') {
                        convertedDate = "01/2023"
                    }
                    if (keepMonthsArray[j] == 'Feb/2023') {
                        convertedDate = "02/2023"
                    }

                    if (currentMth.toString().includes(convertedDate.toString())) { //eg. includes 'Mar/2022'
                        //check day: 'Mon'

                        for (k = 0; k < keepDaysArray.length; k++) {
                            if (currentDay.toString().includes(keepDaysArray[k].toString())) {
                                //check session: '3'
                                for (h = 0; h < keepSessionsArray.length; h++) {

                                    if (currentSession.toString() == keepSessionsArray[h].toString()) {
                                        //there is at least one selectable slot:
                                        matchedSlots.push(availableSlots[i].value)
                                    }
                                }
                            }
                        }
                    }

                }
            }
            if (matchedSlots.length >= 0) {
                return;
            }
            else {
                return self.location.assign('bookingTableErrorPage.html')
            }
        }




        function changeLayout() {
            checkSlots()
            var currentTitle = localStorage.getItem('TheorySelection');
            if (currentTitle == 'BTL') {
                document.getElementById('bookingPageTitle3rd').innerHTML = "Booking For BTL"
                document.title = "Booking For BTL Calendar Page"
            }
            if (currentTitle == 'BTP') {
                document.getElementById('bookingPageTitle3rd').innerHTML = "Booking For Basic Theory Practice"
                document.title = "Booking For Basic Theory Practice Calendar Page"
            }
            if (currentTitle == 'BTE') {
                document.getElementById('bookingPageTitle3rd').innerHTML = "Booking For Basic Theory Evaluation"
                document.title = "Booking For Basic Theory Evaluation Calendar Page"
            }

            if (currentTitle == 'FTL') {
                document.getElementById('bookingPageTitle3rd').innerHTML = "Booking For FTL"
                document.title = "Booking For FTL Calendar Page"
            }
            if (currentTitle == 'FTP') {
                document.getElementById('bookingPageTitle3rd').innerHTML = "Booking For Final Theory Practice"
                document.title = "Booking For Final Theory Practice Calendar Page"
            }
            if (currentTitle == 'FTE') {
                document.getElementById('bookingPageTitle3rd').innerHTML = "Booking For Final Theory Evaluation"
                document.title = "Booking For Final Theory Evaluation Calendar Page"
            }
            changeOptions()
            changeTable()
        }
    </script>

    <!--tool tip-->
    <span id="toolTip" name="tipDiv1"
        style="width: 400px; border-color: rgb(0, 102, 204); border-width: 1px; padding: 8px; border-style: ridge; display: block; position: absolute; visibility: hidden; background-color: rgb(217, 232, 247); left: -106px; top: 353px;">
        <table width="100%" border="0" cellspacing="5px" cellpadding="0" bgcolor="#0066CC">
            <tbody>
                <tr>
                    <td>
                        <table width="100%" border="0" style="border-spacing: 7px" cellpadding="2" bgcolor="#FFFFFF">
                            <tbody>
                                <tr>
                                    <td align="right" class="bluetxtbold">Date:</td>
                                    <td id="dateToolTip" class="bluetxt">24/03/2022 (Thur)</td>
                                </tr>
                                <tr>
                                    <td align="right" class="bluetxtbold">Session:</td>
                                    <td id="sessionToolTip" class="bluetxt">5 (15:20-17:00)</td>
                                </tr>
                                <tr>
                                    <td align="right" class="bluetxtbold">Location:</td>
                                    <td id="locationToolTip" class="bluetxt">3</td>
                                </tr>
                                <tr>
                                    <td align="right" class="bluetxtbold">Venue:</td>
                                    <td id="venueToolTip" class="bluetxt">HBTL</td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
            </tbody>
        </table>
    </span>

    <script>

        function showToolTip(event, currentId) {
            var currentCell = document.getElementById(currentId);

            currentCell.style.backgroundColor = "#d9e8f7";

            var toolTip = document.getElementById('toolTip');
            toolTip.style.visibility = "visible";
            //position of toolTip:
            var toolTipPosition = toolTip.getBoundingClientRect();
            if (event.pageX > 0.5 * document.documentElement.clientWidth) {
                toolTip.style.left = (event.pageX - 450) + "px"
            } else {
                toolTip.style.left = (event.pageX + 35) + "px"
            }

            toolTip.style.top = (event.pageY - 20) + "px"

            //change content of tooltip for current cell:
            //check date/day and time:
            var date = currentCell.children[0].value.toString().split("-")[0]
            var day = currentCell.children[0].value.toString().split("-")[1]
            var session = currentCell.children[0].value.toString().split("-")[2]

            document.getElementById("dateToolTip").innerHTML = date + " " + "(" + day + ")"
            document.getElementById("sessionToolTip").innerHTML = session + " " + "("

            var lessonType = localStorage.getItem('TheorySelection')
            if (lessonType == 'BTL' || lessonType == 'FTL') {
                if (session == 2) {
                    var time = "09:20-11:00"
                }
                else if (session == 3) {
                    var time = '11:30-13:10'
                }
                else if (session == 4) {
                    var time = '13:20-15:00'
                }
                else if (session == 5) {
                    var time = '15:20-17:00'
                }
                else if (session == 6) {
                    var time = '17:10-18:50'
                }
                else if (session == 7) {
                    var time = '19:20-21:00'
                }
                else if (session == 8) {
                    var time = '21:10-22:50'
                }
            }
            else if (lessonType == 'BTE' || lessonType == 'FTE' || lessonType == 'BTP' || lessonType == 'FTP') {
                if (session == "1") {
                    var time = "07:30-8:15"
                }
                else if (session == 2) {
                    var time = "08:25-9:10"
                }
                else if (session == 3) {
                    var time = '09:20-10:05'
                }
                else if (session == 4) {
                    var time = '10:15-11:00'
                }
                else if (session == 5) {
                    var time = '11:30-12:15'
                }
                else if (session == 6) {
                    var time = '12:25-13:10'
                }
                else if (session == 7) {
                    var time = '13:20-14:05'
                }
                else if (session == 8) {
                    var time = '14:15-15:00'
                }
                else if (session == 9) {
                    var time = '15:20-16:05'
                }
                else if (session == 10) {
                    var time = '16:15-17:00'
                }
                else if (session == 11) {
                    var time = '17:10-17:55'
                }
                else if (session == 12) {
                    var time = '18:05-18:50'
                }
                else if (session == 13) {
                    var time = '19:20-20:05'
                }
                else if (session == 14) {
                    var time = '20:15-21:00'
                }
                else if (session == 15) {
                    var time = '21:10-21:55'
                }
                else if (session == 16) {
                    var time = '22:05-22:50'
                }
            }

            document.getElementById("sessionToolTip").innerHTML += time + ")"

            //location:
            if (lessonType == 'BTL') {
                var location = '3'
            }
            else if (lessonType == 'FTL') {
                var location = '6'
            }
            else if (lessonType == 'BTP' || lessonType == 'BTE' || lessonType == 'FTP' || lessonType == 'FTE') {
                var location = 'ROOM 7'
            }
            document.getElementById("locationToolTip").innerHTML = location

            //venue:
            var venue = localStorage.getItem('Venue')
            document.getElementById("venueToolTip").innerHTML = venue
        }


        function hideToolTip(currentId) {
            var currentCell = document.getElementById(currentId);
            //if radio btn not checked or no radio btn, set to white
            //retain blue for checked boxes
            if (!(currentCell.children.length > 0 && currentCell.children[0].checked == true)) {
                currentCell.style.backgroundColor = "#ffffff";
            }

            //hide Tip:
            var toolTip = document.getElementById('toolTip');
            toolTip.style.visibility = "hidden";
        }
    </script>

    <script>

        //triggered onClick:
        function changeCellColor(currentId) {
            var prevCell
            prevCell = localStorage.getItem('prevCell')
            if (prevCell) {
                //untick - if radio btn, set prev cell colour back to white
                var page = localStorage.getItem('TheorySelection')

                if ((page == 'BTL' || page == 'BTE' || page == 'FTL' || page == 'FTE')) {
                    //document.getElementById(prevCell).style.backgroundColor = "#ffffff";
                    var prevCellId = document.getElementById(prevCell.toString()).parentNode.id
                    document.getElementById(prevCellId.toString()).style.backgroundColor = "#ffffff";
                }
                localStorage.removeItem('prevCell')
            }
            else {
                var prevCell;
            }

            var currentCellId = document.getElementById(currentId).parentNode.id;
            var currentCell = document.getElementById(currentCellId)
            //tick - change selected cell to blue:
            if (currentCell.children[0].checked == true) {
                currentCell.style.backgroundColor = "#d9e8f7";
            }

            //untick - if checkbox, change selected cell to white
            else {
                currentCell.style.backgroundColor = "#ffffff";
            }

            localStorage.setItem('prevCell', currentId.toString())
        }

        function updateCellandResult(currentId) {
            changeCellColor(currentId)
        }
    </script>

    <!--heading-->
    <p id="bookingPageTitle3rd" class="pgtitle">Booking For BTL</p>
    <p>

    </p>

    <!--details and table-->
    <form action="b-theoryLessonBookingConfirm.asp" method="post">
        <input type="hidden" name="accId" value="944821">

        <table width="50%" cellspacing="4px" cellpadding="4px">

            <tbody>
                <tr id="Lesson Row" valign="top">
                    <td class="txtbold" style="text-align:right; white-space: nowrap;">
                        Lesson No.:
                    </td>
                    <td class="txt" id='Lesson Display' width="100%" style="text-align:left; white-space: nowrap;">
                        1.02
                    </td>
                </tr>
                <tr valign="top">
                    <td class="txtbold" style="text-align:right; white-space: nowrap;">
                        Medium:
                    </td>
                    <td class="txt" style="text-align:left; white-space: nowrap;">
                        English
                    </td>
                </tr>
                <tr valign="top">
                    <td class="txtbold" style="text-align:right; white-space: nowrap;">
                        Month:
                    </td>
                    <td class="txt" id='Months Display' width="100%" style="text-align:left; white-space: nowrap;">
                        Mar/2022, Apr/2022, May/2022, Jun/2022, Jul/2022, Aug/2022, Sep/2022, Oct/2022, Nov/2022,
                        Dec/2022, Jan/2023, Feb/2023
                    </td>
                </tr>
                <tr valign="top">
                    <td class="txtbold" style="text-align:right; white-space: nowrap;">
                        Session:
                    </td>
                    <td class="txt" id='Sessions Display' width="100%" style="text-align:left; white-space: nowrap;">
                        1, 2, 3, 4, 5, 6, 7, 8
                    </td>
                </tr>
                <tr valign="top">
                    <td class="txtbold" style="text-align:right; white-space: nowrap;">
                        Day:
                    </td>
                    <td class="txt" id='Days Display' width="100%" style="text-align:left; white-space: nowrap;">
                        Mon, Tue, Wed, Thur, Fri, Sat, Sun
                    </td>
                </tr>
                <tr valign="top">
                    <td class="txtbold">&nbsp;

                    </td>
                    <td class="txt">&nbsp;

                    </td>
                </tr>
            </tbody>
        </table>

        <table width="100%">
            <tbody>
                <tr valign="top">
                    <td colspan="2" class="title">
                        <img src="../image/icn-sqbull.gif">&nbsp;Slots Listing
                    </td>
                </tr>
                <tr valign="top">
                    <td colspan="2" class="comment">
                        Below are the only slots that available based on your schedule selection.
                        Please tick to select the date and then click "<span class="commentbold">Submit</span>".
                        Click "<span class="commentbold">&lt;&lt; Back</span>" to select other schedule.
                        Click "<span class="commentbold">View Booking</span>" to view valid unattended booking based on
                        the schedule you selected.<br>
                    </td>
                </tr>
                <tr valign="top">
                    <td colspan="2" width="1" height="3">
                        <spacer type="block" width="1" height="1">
                        </spacer>
                    </td>
                </tr>
            </tbody>
        </table>

        <body>
            <div id="calendar"></div>
            <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.min.js"></script>
            <script src="js/cal.js"></script>
            <!-- 14/05/2022-Sat-10 -->

        </body>
        </td>
        </tr>

        <script>
            function submitBookedSlots() {
                var selectedSlots = [];
                //selectedSlots.push(document.getElementById("output").value);
                var slots = document.getElementsByName("slot");
                for (var i = 0; i < slots.length; i++) {
                    selectedSlots.push(slots[i].value);
                }
                //alert(selectedSlots.length)

                // for (var i = 0; i < slots.length; i++) {
                //     if (slots[i].checked == true) {
                //         //store value of selected slot:
                //         selectedSlots.push(slots[i].value)
                //     }
                // }
                if (selectedSlots.length === 0) {
                    alert("Please select a slot to book.")
                    return false;
                }
                // for (let i = 0 ; i < selectedSlots.length; i++) {
                //     //alert("HERE " + selectedSlots[i]);
                //     if (selectedSlots[i] == undefined) {
                //         alert("Please select a slot to book.")
                //         return false;
                //     }
                // }

                localStorage.removeItem('SelectedSlots')
                localStorage.setItem('SelectedSlots', JSON.stringify(selectedSlots))
                //alert(localStorage.getItem('SelectedSlots'));

                var lessonType = localStorage.getItem('TheorySelection')
                if (lessonType == 'BTL' || lessonType == 'FTL') {

                    return location.assign('bookingConfirmationPageLesson.html');
                }
                else if (lessonType == 'BTP' || lessonType == 'FTP') {
                    return location.assign('bookingConfirmationPagePractice.html');
                }

                return location.assign('bookingConfirmationPageEvaluation.html');
            }
            function postBookingPDI(varSlotCount, form, url, radioMsg, checkMsg) {
                var ct = 2;

                //alert(ct.value);

                var browser = navigator.appName

                //alert(browser);
                //alert("GNWKJ");

                if (browser == "Netscape") {
                    if ((ct.value > 0) || ct.value != null)   // member has clicked on some slot, so display next screen
                    {
                        form.action = url;
                        form.submit();
                    }
                    else {
                        //alert(checkMsg);  // else display empty slot error
                        return false;
                    }

                }
                else {
                    if ((ct.value > 0) || (ct.value != null))   // member has clicked on some slot, so display next screen
                    {
                        form.action = url;
                        form.submit();
                    }
                    else {
                        //alert(checkMsg);  // else display empty slot error
                        return false;
                    }
                }
            }

        </script>

        <tr valign=" top">
            <td class="txtbold" nowrap=">&nbsp;

                    </td>
                    <td class=" txt" width="100%">&nbsp;

            </td>
            </tbody>
            </table>
            <table>
                <tbody>
                    <tr valign="top">
                        <td class="txtbold" nowrap="">
                            <input type="button" name="" value="<< Back" class="btn"
                                onclick="javascript:history.go(-1);" onmouseover="blueBtnOver(this)"
                                onmouseout="blueBtnOut(this)">
                            <input type="button" name="" enabled="" value="Submit" class="btn"
                                onclick="submitBookedSlots();postBookingPDI('varSlotCount',this.form, 'b-theoryLessonBookingConfirm.asp?limit=BTL', 'Please select a slot to book.', 'Please select a slot to book.');"
                                onmouseover="blueBtnOver(this)" onmouseout="blueBtnOut(this)"
                                style="background: rgb(0, 102, 204);">
                            <!--		<input type="button" name="" enabled value="Submit"   class="btn" onclick="postBooking(this.form, 'b-theoryLessonBookingConfirm.asp?limit=BTL', 'Please select a slot to book.', 'Please select a slot to book.')" onmouseover="blueBtnOver(this)" onmouseout="blueBtnOut(this)">-->
                        </td>
                        <td class="txtbold" align="right" nowrap="">
                            <input type="button" name="btnShow" value="View Booking Records" class="btn1"
                                onclick="javascript:showBooking('b-AllBookStatement.asp?from=3/1/2022&amp;to=3/5/2023');"
                                onmouseover="whiteBtnOver(this)" onmouseout="whiteBtnOut(this)">
                        </td>
                    </tr>
                    <tr valign="top">
                        <td class="txtbold" nowrap>&nbsp;

                        </td>
                        <td class="txt" width="100%">&nbsp;

                        </td>
                    </tr>
                </tbody>
            </table>
    </form>
    <script>
        //Customize White Button Mouse Out Color
        function whiteBtnOut(obj) {
            obj.style.background = "#FFFFFF";
            obj.style.color = "#0066CC";
        }

        //Customize White Button Mouse Over Color
        function whiteBtnOver(obj) {
            obj.style.background = "#00CCFF";
            obj.style.color = "#FFFFFF";
        }
    </script>

</body>

</html>
